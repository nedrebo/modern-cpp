sudo: required

language: generic

services:
  - docker
  
before_install:
  - pip install --user cpp-coveralls &&
    docker pull nedrebo/modern-cpp

script:
  - docker run -i -v $PWD:/code nedrebo/modern-cpp bash -e "/code/ci/linux/build.sh" &&
    docker run -i -v $PWD:/code nedrebo/modern-cpp bash -e "/code/ci/linux/test.sh"

after_success:
  - docker run -i -v $PWD:/code -w /code nedrebo/modern-cpp coveralls --exclude lib --exclude tests --gcov-options '\-lp'
